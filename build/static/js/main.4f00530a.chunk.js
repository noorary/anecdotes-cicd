(this["webpackJsonpredux-anecdotes"]=this["webpackJsonpredux-anecdotes"]||[]).push([[0],{28:function(t,e,n){t.exports=n(58)},58:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(8),o=n.n(c),i=n(3),u=n(1),s=n.n(u),l=n(4),d=n(27),f=n(14),p=n(9),v=n.n(p),m={getAll:function(){var t=Object(l.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/anecdotes");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createNew:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:e,votes:0,id:(1e5*Math.random()).toFixed(0)},t.next=3,v.a.post("/anecdotes",n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,v.a.put("".concat("/anecdotes","/").concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(console.log("state now: ",t),console.log("action",e),e.type){case"VOTE":var n=e.data.id,r=t.find((function(t){return t.id===n})),a=Object(f.a)({},r,{votes:r.votes+1});return t.map((function(t){return t.id!==n?t:a})).sort((function(t,e){return e.votes-t.votes}));case"NEW_ANECDOTE":return[].concat(Object(d.a)(t),[e.data]);case"INIT_ANECDOTES":return e.data.sort((function(t,e){return e.votes-t.votes}));default:return t}},b=function(t,e){return function(){var n=Object(l.a)(s.a.mark((function n(r){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=setTimeout((function(){r(h())}),1e3*e),r({type:"SET_NOTIF",data:{notification:t,timer:a}});case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},h=function(){return{type:"CLEAR_NOTIF"}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notification:"",timer:null},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_NOTIF":return console.log("T\xc4\xc4"),console.log(t.timer),null!==t.timer&&clearTimeout(t.timer),{notification:e.data.notification,timer:e.data.timer};case"CLEAR_NOTIF":return{notification:"",timer:null};default:return t}},w={vote:function(t){return function(){var e=Object(l.a)(s.a.mark((function e(n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(f.a)({},t,{votes:t.votes+1}),console.log(r),e.next=4,m.update(r);case 4:a=e.sent,c=a.id,n({type:"VOTE",data:{id:c}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setNotification:b},y=Object(i.b)((function(t){return{anecdotes:t.anecdotes.filter((function(e){return e.content.toLowerCase().includes(t.filter.toLowerCase())}))}}),w)((function(t){return a.a.createElement("div",null,t.anecdotes.map((function(e){return a.a.createElement("div",{key:e.id},a.a.createElement("div",null,e.content),a.a.createElement("div",null,"has ",e.votes,a.a.createElement("button",{onClick:function(){return n=e,t.vote(n),void t.setNotification("you voted '".concat(n.content,"'"),5);var n}},"vote")))})))})),g=Object(i.b)(null,{addAnecdote:function(t){return function(){var e=Object(l.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.createNew(t);case 2:r=e.sent,n({type:"NEW_ANECDOTE",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setNotification:b})((function(t){var e=function(){var e=Object(l.a)(s.a.mark((function e(n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=n.target.anecdote.value,n.target.anecdote.value="",t.addAnecdote(r),t.setNotification("you added '".concat(r,"'"),5);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h3",null,"add new anecdote"),a.a.createElement("form",{onSubmit:e},a.a.createElement("input",{name:"anecdote"}),a.a.createElement("button",{type:"submit"},"add")))})),T=Object(i.b)((function(t){return{notification:t.notification.notification}}),null)((function(t){console.log(t);var e,n=t.notification;return e=""===n||""===n.notification?void 0:{border:"solid",padding:10,borderWidth:1},a.a.createElement("div",{style:e},n)})),j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_FILTER":return e.data.filter;default:return t}},x=Object(i.b)(null,{setFilter:function(t){return{type:"SET_FILTER",data:{filter:t}}}})((function(t){return a.a.createElement("div",{style:{marginBottom:10}},"filter anecdotes",a.a.createElement("input",{name:"filter",onChange:function(e){var n=e.target.value;t.setFilter(n)}}))})),N=function(){var t=Object(i.c)();return Object(r.useEffect)((function(){t(function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.getAll();case 2:n=t.sent,e({type:"INIT_ANECDOTES",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),a.a.createElement("div",null,a.a.createElement(T,null),a.a.createElement("h2",null,"Anecdotes"),a.a.createElement(x,null),a.a.createElement(y,null),a.a.createElement(g,null))},k=n(6),A=n(25),I=n(26),C=Object(k.combineReducers)({anecdotes:E,notification:O,filter:j}),_=Object(k.createStore)(C,Object(I.composeWithDevTools)(Object(k.applyMiddleware)(A.a)));o.a.render(a.a.createElement(i.a,{store:_},a.a.createElement(N,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.4f00530a.chunk.js.map